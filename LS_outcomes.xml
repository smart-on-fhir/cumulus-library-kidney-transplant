<View style="display: flex; align-items: flex-start; gap: 1em; max-height: 100vh; overflow-y: hidden;">
    <!-- Left panel: labels + filter -->
    <View style="width: 350px; padding: 0.5em; background: #f7f7f7; border-radius: 4px; max-height: 80vh; overflow-y: auto;">
        <Header value="Patient $patient_id" style="overflow: hidden; width: 250px; text-overflow: ellipsis; white-space: nowrap; margin: 5px 0px;"/>
        <Header value="Doc $docref_dxr_id" style="overflow: hidden; width: 250px; text-overflow: ellipsis; white-space: nowrap; margin: 5px 0px;"/>

        <Labels name="label" toName="text" showInline="false">
            <Label value="Rx Therapeutic" hotkey="T" background="#90ee90"/>
            <Label value="Rx Compliance" hotkey="U" background="#20b2aa"/>
            <Label value="DSA" hotkey="A" background="#9370db"/>
            <Label value="Infection" hotkey="I" background="#DC143C"/>
            <Label value="Viral" hotkey="V" background="#DC143C"/>
            <Label value="Bacterial" hotkey="B" background="#DC143C"/>
            <Label value="Fungal" hotkey="Z" background="#DC143C"/>
            <Label value="Graft Rejection" hotkey="R" background="#FF00FF"/>
            <Label value="Graft Failure" hotkey="F" background="#00008B"/>
            <Label value="PTLD" hotkey="P" background="#FF8C00"/>
            <Label value="Cancer" hotkey="C" background="#FF8C00"/>
            <Label value="Deceased" hotkey="D" background="#00008B"/>
            <Label value="Exclude Patient" hotkey="X"/>
            <Label value="FlagReview" hotkey="/" />
        </Labels> 

        <View visibleWhen="region-selected" whenLabelValue="FlagReview">
            <Header value="FlagReview" />
            <TextArea name="FlagReview" toName="text" perRegion="true" placeholder="Enter FlagReview additional info"/>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Exclude Patient">
            <Header value="Exclude Patient"/>
            <TextArea name="Exclude Patient" toName="text" perRegion="true" placeholder="Enter Exclude Patient additional info"/>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Rx Therapeutic">
            <Header value="Rx Therapeutic" />
            <Choices name="Rx Therapeutic" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Rx Therapeutic" perRegion="true">
                <Choice value="Immunosuppression levels are documented as therapeutic, adequate, or within target range."/>
                <Choice value="Immunosuppression levels are documented as subtherapeutic, insufficient, or below target range."/>
                <Choice value="Immunosuppression levels are documented as supratherapeutic, above therapeutic level, or above target range."/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Rx Compliance">
            <Header value="Rx Compliance" />
            <Choices name="Rx Compliance" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Rx Compliance" perRegion="true">
                <Choice value="Patient is documented as compliant with immunosuppressive medications."/>
                <Choice value="Patient is documented as only partially compliant with immunosuppressive medications."/>
                <Choice value="Patient is documented as noncompliant with immunosuppressive medications."/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="DSA">
            <Header value="DSA" />
            <Choices name="DSA" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="DSA" perRegion="true">
                <Choice value="DSA diagnostic test positive, DSA diagnosis 'confirmed' or 'positive', or increase in immunosuppression due to DSA"/>
                <Choice value="DSA suspected, DSA likely, DSA cannot be ruled out, DSA test result pending, or treatment with IVIG/plasmapheresis"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Infection">
            <Header value="Infection" />
            <Choices name="Infection" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Infection" perRegion="true">
                <Choice value="Infection confirmed by laboratory test or imaging, infection diagnosis was 'confirmed' or 'positive', or reduced immunosuppression due to infection"/>
                <Choice value="Infection is suspected, likely, cannot be ruled out, infection is a differential diagnosis or infectious test result is pending"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Viral">
            <Header value="Viral" />
            <Choices name="Viral" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Viral" perRegion="true">
                <Choice value="Viral infection confirmed by laboratory test or imaging, viral infection diagnosis was 'confirmed' or 'positive', or reduced immunosuppression due to viral infection"/>
                <Choice value="Viral infection is suspected, likely, cannot be ruled out, viral infection is a differential diagnosis or viral test result is pending"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Bacterial">
            <Header value="Bacterial" />
            <Choices name="Bacterial" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Bacterial" perRegion="true">
                <Choice value="Bacterial infection confirmed by laboratory test or imaging, bacterial infection diagnosis was 'confirmed' or 'positive', or reduced immunosuppression due to bacterial infection"/>
                <Choice value="Bacterial infection is suspected, likely, cannot be ruled out, bacterial infection is a differential diagnosis or bacterial test result is pending"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Fungal">
            <Header value="Fungal" />
            <Choices name="Fungal" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Fungal" perRegion="true">
                <Choice value="Fungal infection confirmed by laboratory test or imaging, fungal infection diagnosis was 'confirmed' or 'positive', or reduced immunosuppression due to fungal infection"/>
                <Choice value="Fungal infection is suspected, likely, cannot be ruled out, fungal infection is a differential diagnosis or fungal test result is pending"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Graft Rejection">
            <Header value="Graft Rejection" />
            <Choices name="Graft Rejection" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Graft Rejection" perRegion="true">
                <Choice value="Biopsy proven kidney graft rejection or pathology proven kidney graft rejection"/>
                <Choice value="Kidney graft rejection was 'diagnosed', 'confirmed' or 'positive'"/>
                <Choice value="Kidney graft rejection presumed, suspected, likely, cannot be ruled out, biopsy result pending, or treatment with IVIG/plasmapheresis"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Graft Failure">
            <Header value="Graft Failure" />
            <Choices name="Graft Failure" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Graft Failure" perRegion="true">
                <Choice value="Kidney graft has failed or kidney graft loss"/>
                <Choice value="Kidney graft failure presumed, suspected, likely, or cannot be ruled out"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="PTLD">
            <Header value="PTLD" />
            <Choices name="PTLD" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="PTLD" perRegion="true">
                <Choice value="Biopsy proven or pathology proven PTLD"/>
                <Choice value="PTLD was 'diagnosed', 'confirmed' or 'positive' or viral positive lymphoma"/>
                <Choice value="PTLD presumed, suspected, likely, cannot be ruled out, PTLD biopsy result pending, or treatment with chemotherapy/radiation"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Cancer">
            <Header value="Cancer" />
            <Choices name="Cancer" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Cancer" perRegion="true">
                <Choice value="Biopsy proven or pathology proven cancer"/>
                <Choice value="Cancer was 'diagnosed', 'confirmed' or 'positive'"/>
                <Choice value="Cancer is presumed, suspected, likely, cannot be ruled out, biopsy of any lesion, or treatment with chemotherapy/radiation"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Deceased">
            <Header value="Deceased" />
            <Choices name="Deceased" toName="text" choice="single-radio" visibleWhen="region-selected" whenLabelValue="Deceased" perRegion="true">
                <Choice value="True"/>
                <Choice value="False"/>
            </Choices>
        </View>

        <View visibleWhen="region-selected" whenLabelValue="Deceased">
            <Header value="Deceased Datetime" />
            <TextArea name="Deceased Datetime" toName="text" perRegion="true" placeholder="Enter Deceased Datetime additional info"/>
        </View>
    </View>

    <!-- Right panel: text to annotate -->
    <View style="flex: 1; max-height: 80vh; overflow-y: auto;">
        <Text
            name="text"
            value="$text"
            granularity="word"
        />
    </View>
</View>